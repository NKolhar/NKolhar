import paramiko
import getpass
from colorama import Fore, Style, init

# Initialize colorama for color support
init(autoreset=True)

def main():
    # Prompt user for F5 login
    f5_host = input("Enter F5 hostname or IP: ")
    f5_user = input("Enter F5 username: ")
    f5_pass = getpass.getpass("Enter F5 password: ")

    # Set up SSH connection
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

    print(Fore.YELLOW + f"Connecting to {f5_host}...")

    try:
        ssh.connect(f5_host, username=f5_user, password=f5_pass)
        print(Fore.GREEN + "Connected successfully.")

        # Run a test command
        command = "tmsh show sys version"
        stdin, stdout, stderr = ssh.exec_command(command)
        output = stdout.read().decode()
        error = stderr.read().decode()

        if output:
            print(Fore.CYAN + "Command Output:")
            print(output.strip())

        if error:
            print(Fore.RED + "Error Output:")
            print(error.strip())

        ssh.close()

    except Exception as e:
        print(Fore.RED + f"SSH connection failed: {e}")

if __name__ == "__main__":
    main()
